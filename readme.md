# PYTHON 예지보전 프로젝트



### 사전 지식

용접 공정 설비의 용접기 노즐에는 높은 전압과 전류가 작용한다. 설비 고장 발생 시 생산 라인 전체의 중단으로 이어져 큰 손실이 발생한다. 그러나 대부분의 현장에서는 장비가 작업자에 의해 수작업으로 모니터링되고 있어 즉각적인 변화에 대응이 힘들고 드물지 않게 고장이 발생하는 상황이다.

### 기획 배경

공정 설비의 PLC 및 센서로부터 데이터를 수집하여 과거 데이터를 학습하고, 이를 토대로 현재 수집중인 데이터에서 이상 발생을 미리 예측하여 불량을 사전에 예지하고 관리자에게 조치 가이드를 제공함으로써 인적, 시간적, 금전적 자원 손해 최소화에 기여할 수 있는 모델을 구축하고자 한다.



### 기술 스택 및 환경

Language

- Python 3.13.9
  - pip 25.2 - 가상환경 관리 및 패키지 설치

Library

- XGBoost 3.1.3 - 불량 분류 모델
- Pandas 2.3.3 - 데이터 처리 및 통계 계산
- Numpy 2.3.5 - 데이터 처리 및 통계 계산
- Matplotlib 3.10.8 - 성능 및 실시간 추세 시각화
- Seaborn 0.13.2 - 성능 및 실시간 추세 시각화
- Scikit-learn 1.8.0 - 데이터 분할 및 성능 평가



### 시스템 플로우차트

![flowchart](/images/flowchart.jpg)

### 데이터셋 구성

| **속성(Column)** | **설명**                    | **비고**  |
| ---------------- | --------------------------- | --------- |
| `DV_R`           | 직류 전압 측정값            | 핵심 변수 |
| `DA_R`           | 직류 전류 측정값            | 핵심 변수 |
| `AV_R`           | 교류 전압 측정값            | 핵심 변수 |
| `AA_R`           | 교류 전류 측정값            | 핵심 변수 |
| `PM_R`           | 용접 속도 측정값            | 핵심 변수 |
| `FIN_JGMT`       | 정상(1) / 불량(0) 판정 결과 |           |



### 주요 구현 기능

- 데이터 전처리 및 분할(훈련:검증:테스트 = 6:2:2)
- 분할한 데이터를 활용하여 XGBoost기반 머신러닝
- 학습한 모델을 기반으로 오차행렬 시각화
- 학습한 데이터의 평균, 표준편차를 이용한 정상범위 설정 및 시각화 (신뢰구간 95%) 
- 학습 정보를 바탕으로 실시간 데이터 흐름에서 이상을 감지
  - 터미널에서 이상 예견 사실을 알리고 조치사항 어드바이스
  - 현재 흐름에 따른 이후 흐름을 예측해 시각화




### pjt 산출물

- 오차행렬 시각화

  ![confusion](/images/confusionmatrix.png)

- 변수별 정상 기대치 및 신뢰구간 시각화

  ![valuerange](/images/valuerange.png)

- 현재 흐름에 따른 미래 흐름 예측 시각화

  ![livetrend](/images/livetrend.png)



회고

- 전압과 전류가 종속적이다보니 어떤 변수가 불량에 가장 큰 영향을 미치는지 판별하기 어려워 아쉬웠다.

- 실제 공정에서 쇼트 발생 등 예고없는 급변에 대응할 수 없을 것으로 판단된다.
- LSTM 계열의 모델을 채택했으면 조금 더 좋은 프로젝트가 될 수도 있었을 것 같다.
